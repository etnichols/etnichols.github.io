<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style id="typography.js">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:87.5%/1.5625 'Atkinson Hyperlegible',sans-serif;box-sizing:border-box;overflow-y:scroll;}*{box-sizing:inherit;}*:before{box-sizing:inherit;}*:after{box-sizing:inherit;}body{color:hsla(0,0%,0%,0.8);font-family:'Atkinson Hyperlegible',sans-serif;font-weight:400;word-wrap:break-word;font-kerning:normal;-moz-font-feature-settings:"kern", "liga", "clig", "calt";-ms-font-feature-settings:"kern", "liga", "clig", "calt";-webkit-font-feature-settings:"kern", "liga", "clig", "calt";font-feature-settings:"kern", "liga", "clig", "calt";}img{max-width:100%;margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5625rem;}h1{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5625rem;color:hsla(0,0%,0%,1);font-family:'Alegreya',serif;font-weight:bold;text-rendering:optimizeLegibility;font-size:2rem;line-height:1.1;}h2{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5625rem;color:hsla(0,0%,0%,1);font-family:'Alegreya',serif;font-weight:bold;text-rendering:optimizeLegibility;font-size:1.51572rem;line-height:1.1;}h3{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5625rem;color:hsla(0,0%,0%,1);font-family:'Alegreya',serif;font-weight:bold;text-rendering:optimizeLegibility;font-size:1.31951rem;line-height:1.1;}h4{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5625rem;color:hsla(0,0%,0%,1);font-family:'Alegreya',serif;font-weight:bold;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.1;}h5{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5625rem;color:hsla(0,0%,0%,1);font-family:'Alegreya',serif;font-weight:bold;text-rendering:optimizeLegibility;font-size:0.87055rem;line-height:1.1;}h6{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5625rem;color:hsla(0,0%,0%,1);font-family:'Alegreya',serif;font-weight:bold;text-rendering:optimizeLegibility;font-size:0.81225rem;line-height:1.1;}hgroup{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5625rem;}ul{margin-left:1.5625rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5625rem;list-style-position:outside;list-style-image:none;}ol{margin-left:1.5625rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5625rem;list-style-position:outside;list-style-image:none;}dl{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5625rem;}dd{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5625rem;}p{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5625rem;}figure{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5625rem;}pre{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5625rem;font-size:0.85rem;line-height:1.5625rem;}table{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5625rem;font-size:1rem;line-height:1.5625rem;border-collapse:collapse;width:100%;}fieldset{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5625rem;}blockquote{margin-left:0;margin-right:1.5625rem;margin-top:0;padding-bottom:0;padding-left:1.75781rem;padding-right:0;padding-top:0;margin-bottom:1.5625rem;font-size:1.1487rem;line-height:1.5625rem;color:hsla(0,0%,0%,0.59);border-left:0.58594rem solid;border-color:#fcea0e;}form{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5625rem;}noscript{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5625rem;}iframe{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5625rem;}hr{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:calc(1.5625rem - 1px);background:hsla(0,0%,0%,0.2);border:none;height:1px;}address{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5625rem;}b{font-weight:700;}strong{font-weight:700;}dt{font-weight:700;}th{font-weight:700;}li{margin-bottom:calc(1.5625rem / 2);}ol li{padding-left:0;}ul li{padding-left:0;}li > ol{margin-left:1.5625rem;margin-bottom:calc(1.5625rem / 2);margin-top:calc(1.5625rem / 2);}li > ul{margin-left:1.5625rem;margin-bottom:calc(1.5625rem / 2);margin-top:calc(1.5625rem / 2);}blockquote *:last-child{margin-bottom:0;}li *:last-child{margin-bottom:0;}p *:last-child{margin-bottom:0;}li > p{margin-bottom:calc(1.5625rem / 2);}code{font-size:0.85rem;line-height:1.5625rem;}kbd{font-size:0.85rem;line-height:1.5625rem;}samp{font-size:0.85rem;line-height:1.5625rem;}abbr{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}acronym{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}abbr[title]{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;text-decoration:none;}thead{text-align:left;}td,th{text-align:left;border-bottom:1px solid hsla(0,0%,0%,0.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding-left:1.04167rem;padding-right:1.04167rem;padding-top:0.78125rem;padding-bottom:calc(0.78125rem - 1px);}th:first-child,td:first-child{padding-left:0;}th:last-child,td:last-child{padding-right:0;}a{color:#fb251b;text-decoration:none;}a:hover,a:active{color:hsla(0,0%,0%,0.8);}h1,h2,h3,h4,h5,h6{margin-top:3.125rem;}blockquote > :last-child{margin-bottom:0;}blockquote cite{font-size:1rem;line-height:1.5625rem;color:hsla(0,0%,0%,0.8);font-weight:400;}blockquote cite:before{content:"— ";}@media only screen and (max-width:480px){blockquote{margin-left:-1.17188rem;margin-right:0;border-left:0.29297rem solid;border-color:#fcea0e;padding-left:0.87891rem;}}</style><style data-href="/styles.12b60d0c736ef2fe3362.css">code[class*=language-],pre[class*=language-]{color:#000;background:none;text-shadow:0 1px #fff;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-]::selection,code[class*=language-] ::selection,pre[class*=language-]::selection,pre[class*=language-] ::selection{text-shadow:none;background:#b3d4fc}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#f5f2f0}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#999}.token.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#905}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#690}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url{color:#9a6e3a;background:hsla(0,0%,100%,.5)}.token.atrule,.token.attr-value,.token.keyword{color:#07a}.token.class-name,.token.function{color:#dd4a68}.token.important,.token.regex,.token.variable{color:#e90}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}pre[class*=language-].line-numbers{position:relative;padding-left:3.8em;counter-reset:linenumber}pre[class*=language-].line-numbers>code{position:relative;white-space:inherit}.line-numbers .line-numbers-rows{position:absolute;pointer-events:none;top:0;font-size:100%;left:-3.8em;width:3em;letter-spacing:-1px;border-right:1px solid #999;-webkit-user-select:none;-ms-user-select:none;user-select:none}.line-numbers-rows>span{pointer-events:none;display:block;counter-increment:linenumber}.line-numbers-rows>span:before{content:counter(linenumber);color:#999;display:block;padding-right:.8em;text-align:right}.link-style{font-size:18px;margin-bottom:16px}ul{list-style:circle;margin-left:1em;margin-bottom:0}.resume-body{-webkit-column-count:2;-webkit-column-width:256px;columns:256px 2;-webkit-column-rule:1px dotted rgba(46,46,46,.2);column-rule:1px dotted rgba(46,46,46,.2)}.section,.section-title-container{display:inline-block;width:100%}.section-title{margin:8px 4px}.section-bar{background-color:#fb251b;height:4px;margin:4px}.entry{color:rgba(46,46,46,.4);display:flex;flex-direction:column;margin:8px}.entry-title{margin:8px 0;line-height:1.25}.entry-company{color:rgba(46,46,46,.95);margin:4px 0;line-height:1.25}.entry-duration{color:#2e2e2e;margin-bottom:16px;font-size:14px;font-style:italic}.entry-description{color:rgba(46,46,46,.95);font-size:14px;line-height:1.7em;margin-bottom:8px}.title-section-description{margin-top:24px;max-width:380px;text-align:center}.disclaimer{margin:16px 0;max-width:380px;text-align:center;font-style:italic}.icon-section{display:flex;justify-content:center}.link-icon{margin-right:16px}.profile-image{border:none;margin:16px auto}.centered{display:flex;flex-direction:column;align-items:center}svg{cursor:pointer}.icon{margin:8px;fill:rgba(46,46,46,.95)}.icon:hover{cursor:pointer;fill:rgba(46,46,46,.4)}.container{padding:16px}@media (min-width:1024px){.container{padding:24px;max-width:45rem;margin:0 auto}}.site-title{line-height:1;margin:0;padding:8px 0}ul{list-style:none}footer{padding-top:10px;color:#d0272a;position:absolute;left:0;bottom:1em;right:0;width:100%;text-align:center}html{height:100%;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;box-sizing:border-box}body{position:relative;min-height:100%;margin:0;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}main{padding-bottom:3em}img{border:1px solid #000}.gatsby-highlight-code-line{background-color:#feb;display:block;margin-right:-1em;margin-left:-1em;padding-right:1em;padding-left:.75em;border-left:.25em solid #00ff3e}.gatsby-highlight{background-color:#fdf6e3;border-radius:.3em;margin:.5em 0;padding:1em;overflow:auto}.gatsby-highlight pre[class*=language-]{background-color:transparent;margin:0;padding:0;overflow:initial;float:left;min-width:100%}.gatsby-highlight pre[class*=language-].line-numbers{padding-left:2.8em}.bold{font-weight:600}.extra-bold{font-weight:700}.margin-small{margin:8px}.margin-medium{margin:16px}.margin-large{margin:24px}.margin-left-small{margin-left:8px}.margin-left-medium{margin-left:16px}.margin-left-large{margin-left:24px}.margin-right-small{margin-right:8px}.margin-right-medium{margin-right:16px}.margin-right-large{margin-right:24px}.margin-bottom-xsmall{margin-bottom:4px}.margin-bottom-small{margin-bottom:8px}.margin-bottom-medium{margin-bottom:16px}.margin-bottom-large{margin-bottom:24px}.margin-bottom-xlarge{margin-bottom:32px}.margin-top-xsmall{margin-top:4px}.margin-top-small{margin-top:8px}.margin-top-medium{margin-top:16px}.margin-top-large{margin-top:24px}.padding-left-small{padding-left:8px}.padding-left-medium{padding-left:16px}.padding-left-large{padding-left:24px}.padding-right-small{padding-right:8px}.padding-right-medium{padding-right:16px}.padding-right-large{padding-right:24px}.padding-bottom-small{padding-bottom:8px}.padding-bottom-medium{padding-bottom:16px}.padding-bottom-large{padding-bottom:24px}.padding-small{padding:8px}.padding-medium{padding:16px}.margin-large{padding:24px}.no-margin{margin:0}.no-underline{text-decoration:none}.border-radius-small{border-radius:4px}.post-list-item{border-left:2px solid rgba(46,46,46,.2);padding:8px}.title-container{display:flex;flex-direction:column}.list-item{font-size:18px;margin-right:8px;font-weight:600}.post-date{display:block;font-size:18px;color:#595955;font-style:italic}.blue{background-color:#4c6873}.green{background-color:#6e8c01}.post-type-container{display:flex;justify-content:flex-start;margin-right:8px}@media (min-width:768px){.post-type-container{align-items:center;justify-content:center}}.post-type{font-size:14px;display:flex;justify-content:center;margin-top:8px;min-width:50px;height:22px;color:#fff;border-radius:2px}@media (min-width:768px){.post-type{margin:0 0 0 8px}}</style><meta name="generator" content="Gatsby 2.20.12"/><title data-react-helmet="true"></title><link rel="preconnect dns-prefetch" href="https://www.google-analytics.com"/><link rel="icon" href="/icons/icon-48x48.png?v=e5cf2d7f177cdb6ce5d6a938eae4828f"/><link rel="manifest" href="/manifest.webmanifest"/><meta name="theme-color" content="##fb251b"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=e5cf2d7f177cdb6ce5d6a938eae4828f"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=e5cf2d7f177cdb6ce5d6a938eae4828f"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=e5cf2d7f177cdb6ce5d6a938eae4828f"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=e5cf2d7f177cdb6ce5d6a938eae4828f"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=e5cf2d7f177cdb6ce5d6a938eae4828f"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=e5cf2d7f177cdb6ce5d6a938eae4828f"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=e5cf2d7f177cdb6ce5d6a938eae4828f"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=e5cf2d7f177cdb6ce5d6a938eae4828f"/><link href="//fonts.googleapis.com/css?family=Alegreya:400,700|Atkinson+Hyperlegible:400" rel="stylesheet" type="text/css"/><style type="text/css">
    .anchor.before {
      position: absolute;
      top: 0;
      left: 0;
      transform: translateX(-100%);
      padding-right: 4px;
    }
    .anchor.after {
      display: inline-block;
      padding-left: 4px;
    }
    h1 .anchor svg,
    h2 .anchor svg,
    h3 .anchor svg,
    h4 .anchor svg,
    h5 .anchor svg,
    h6 .anchor svg {
      visibility: hidden;
    }
    h1:hover .anchor svg,
    h2:hover .anchor svg,
    h3:hover .anchor svg,
    h4:hover .anchor svg,
    h5:hover .anchor svg,
    h6:hover .anchor svg,
    h1 .anchor:focus svg,
    h2 .anchor:focus svg,
    h3 .anchor:focus svg,
    h4 .anchor:focus svg,
    h5 .anchor:focus svg,
    h6 .anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
          var clientTop = document.documentElement.clientTop || document.body.clientTop || 0
          var offset = element.getBoundingClientRect().top + scrollTop - clientTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><link as="script" rel="preload" href="/webpack-runtime-84567eaa414c16347ec5.js"/><link as="script" rel="preload" href="/framework-9438dbd474456b725327.js"/><link as="script" rel="preload" href="/app-048ab40cb62a3ab0f5e6.js"/><link as="script" rel="preload" href="/styles-36681512479a843831b0.js"/><link as="script" rel="preload" href="/998111e0b4093109eb16f93865b5d86c605ebad2-6bce13f5c4178f43b987.js"/><link as="script" rel="preload" href="/component---src-templates-post-template-js-f851331e087c9b2b9fa5.js"/><link as="fetch" rel="preload" href="/page-data/programming/lead-to-read-website/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="container"><main><a css="[object Object]" href="/"><h1 class="site-title">etnichols</h1></a><hr/><a class="link-style" href="/"> about</a><br/><a class="link-style" href="/blog"> blog</a><br/><a class="link-style" href="/programming">&gt; programming</a><br/><header><h1 style="margin-bottom:0.78125rem">Lead to Read KC website redesign with Gatsby and Firebase</h1><hr style="margin-bottom:0.78125rem"/><p style="margin-top:0;padding-top:0;display:block;color:hsla(291, 0%, 18%,0.4)">10 min read • <span style="font-style:normal;text-align:left">tagged <span><a href="/tags/gatsby/">Gatsby</a><span>, </span></span><span><a href="/tags/react/">React</a><span>, </span></span><span><a href="/tags/firebase/">Firebase</a></span></span></p></header><div class="toc"><ul>
<li><a href="/programming/lead-to-read-website/#introduction">Introduction</a></li>
<li><a href="/programming/lead-to-read-website/#getting-started">Getting started</a></li>
<li>
<p><a href="/programming/lead-to-read-website/#building-out-the-new-site---the-good-the-bad-the-ugly">Building out the new site - The Good, the Bad, the Ugly</a></p>
<ul>
<li><a href="/programming/lead-to-read-website/#good-shared-page-templates-and-layout-components">(Good) Shared page templates and layout components</a></li>
<li><a href="/programming/lead-to-read-website/#good-and-bad-a-new-gatsby-wordpress-plugin">(Good and bad) A new Gatsby Wordpress plugin</a></li>
<li><a href="/programming/lead-to-read-website/#good-rich-plugin-ecosystem">(Good) Rich plugin ecosystem</a></li>
<li><a href="/programming/lead-to-read-website/#goodbad-firebase-deploy-integration">(Good/Bad) Firebase deploy integration</a></li>
<li><a href="/programming/lead-to-read-website/#ugly-hardcoding-home-page-data">(Ugly) Hardcoding home page data</a></li>
<li><a href="/programming/lead-to-read-website/#good-site-performance">(Good) Site performance</a></li>
</ul>
</li>
<li><a href="/programming/lead-to-read-website/#discussion">Discussion</a></li>
</ul></div><div class="post"><h2 id="introduction" style="position:relative;"><a href="#introduction" aria-label="introduction permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Introduction</h2>
<p>Lead to Read KC is a non-profit that facilitates reading-based mentorship in the Kansas City metro area. They connect adult volunteers with 1st-3rd grade students for one lunch hour each week to read together. As their tagline indicates, “Together we are creating a community of readers, one lunch hour at a time.”</p>
<p>Lead to Read’s previous website was a 10+ year old Wordpress site with lackluster <a href="https://developers.google.com/web/tools/lighthouse">Lighthouse</a> audit scores:</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;"
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/fc1e33dd239c1766827a53507a385b59/e4900/ltr_lighthouse_old.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 29.72972972972973%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABYlAAAWJQFJUiTwAAABRklEQVQY0z2Q3VLCMBCF+xgqaZImTX8oLS2WUCsjQwvDDKB3coGj3vr+L3DcxJ+LzObbzZ7dk0BKCR1FsCb2URDHv6z+WEvYkhNLhCJCRPlVxX0UgupxDGMMnFbgkn1i8FEV2KYJGCUdfxLvsx9eVRHedxNsW4Ykljg+hHgbGcYlA5cKz+czLpcLsixD4FSfaJtDapD7iQJro3EtUuxoapoKvG4muA532FmGesrxdbzB23CLw2pCDjROp6MXzPMcgVu1LApU0yk1p379ggr7eo55npFFgdFKnNcRjBbgZHGwCi+b2LNSMcqyRF3X3nYwm83QdR2W1vpkQeKW7rbv0SwWkCRwb3t0jxsorcE5R15UqJolWMjh+odhwDiOaJoGgbMYhqE/7vE/M+ZZk8iiqWnI0ltydUlH8BARfZdSygu1bYskSfAN/Me0tpNhrKgAAAAASUVORK5CYII='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="Old Lead to Read website Lighthouse Scores"
        title="Old Lead to Read website Lighthouse Scores"
        src="/static/fc1e33dd239c1766827a53507a385b59/fcda8/ltr_lighthouse_old.png"
        srcset="/static/fc1e33dd239c1766827a53507a385b59/12f09/ltr_lighthouse_old.png 148w,
/static/fc1e33dd239c1766827a53507a385b59/e4a3f/ltr_lighthouse_old.png 295w,
/static/fc1e33dd239c1766827a53507a385b59/fcda8/ltr_lighthouse_old.png 590w,
/static/fc1e33dd239c1766827a53507a385b59/efc66/ltr_lighthouse_old.png 885w,
/static/fc1e33dd239c1766827a53507a385b59/e4900/ltr_lighthouse_old.png 988w"
        sizes="(max-width: 590px) 100vw, 590px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
  </a>
    </span></p>
<p>The performance and accessibility categories are especially concerning: The site isn’t accessible or mobile friendly, and it takes more than 17 seconds to become interactive.</p>
<p>Last year, I approached the executive director of Lead to Read to propose a website redesign using <a href="https://www.gatsbyjs.com/">Gatsby</a>. Gatsby is a fantastic React/GraphQL-powered static site generator that I’ve <a href="https://etnichols.com/programming/blog-redesign-with-gatsby">written about before</a> and use for this blog. She gave the redesign the green light and off we went!</p>
<h2 id="getting-started" style="position:relative;"><a href="#getting-started" aria-label="getting started permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Getting started</h2>
<p>I had four main goals in mind as I approached the redesign:</p>
<ul>
<li>Performance: improve the Lighthouse audit scores.</li>
<li>Responsiveness: a layout that works on any screen size.</li>
<li>“Digestability”: clear messaging, easy-to-discover content.</li>
<li>Accessibility: make sure the site works for <em>everyone</em>.</li>
</ul>
<p>To get started, I combed the existing site and grouped the existing content into more coherent sections, using <a href="https://www.sketch.com/">Sketch</a> to bring the pen-and-paper wireframes to life:</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;"
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/cc168f7e768940c5d1a9f49df5bf872d/72e01/lead_to_read_sketch.jpg"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 218.24324324324326%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAsABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAMEBQL/xAAYAQADAQEAAAAAAAAAAAAAAAABAgMABP/aAAwDAQACEAMQAAABn0K04SDBaCrCvPEXDKnnZ5nXJNkK/wD/xAAfEAABBAICAwAAAAAAAAAAAAACAAEDFAQSERMgISP/2gAIAQEAAQUCjyCZFkajaXyUzhoPsemTivIq0qsRbjNEzDkxCNN1SJUn8P/EABsRAAMAAgMAAAAAAAAAAAAAAAABAhITIjFR/9oACAEDAQE/AUcRpUYx6KUujXJ//8QAGREAAwADAAAAAAAAAAAAAAAAAAERAhIy/9oACAECAQE/AWRnJchum7P/xAAkEAACAAQFBQEAAAAAAAAAAAAAAQIRITISImFxkSAxM0Kh4f/aAAgBAQAGPwLyOJ6iqfp6GRQt6FcC3O2bct+lq5MdZkUlFXQSU5FyLy9cdH//xAAfEAACAgICAwEAAAAAAAAAAAABEQAhMUFRkRBhccH/2gAIAQEAAT8hrgQ0UMwhNM8xzgis4RceogqkuKVFAQJukW19gigLp0jMdSAJI4LEoJ3MCzV6lP5ShAQPkCYCVH4//9oADAMBAAIAAwAAABCnAXCTP//EABwRAAICAgMAAAAAAAAAAAAAAAABESExURCR8P/aAAgBAwEBPxB0qkThldkDePaN3CTZcH//xAAaEQEBAAIDAAAAAAAAAAAAAAABABEhMVGB/9oACAECAQE/EMneJy6hfV1EvKBv/8QAIRAAAgIBBAIDAAAAAAAAAAAAAREAIUExUWHREIFx8PH/2gAIAQEAAT8QVDdTl7Q0JKFvkhjWDKVG1sriLJSHErYAK90rAtAd5xpFrntCASGXiAk9a/pKBS47IFQQiO0e4tAckJWTtcWUqH2YapMBz7g+AI/cAAaXLuGAKA+LPj//2Q=='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="New site design mocks"
        title="New site design mocks"
        src="/static/cc168f7e768940c5d1a9f49df5bf872d/1c72d/lead_to_read_sketch.jpg"
        srcset="/static/cc168f7e768940c5d1a9f49df5bf872d/a80bd/lead_to_read_sketch.jpg 148w,
/static/cc168f7e768940c5d1a9f49df5bf872d/1c91a/lead_to_read_sketch.jpg 295w,
/static/cc168f7e768940c5d1a9f49df5bf872d/1c72d/lead_to_read_sketch.jpg 590w,
/static/cc168f7e768940c5d1a9f49df5bf872d/a8a14/lead_to_read_sketch.jpg 885w,
/static/cc168f7e768940c5d1a9f49df5bf872d/72e01/lead_to_read_sketch.jpg 1024w"
        sizes="(max-width: 590px) 100vw, 590px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
  </a>
    </span></p>
<p>After a couple iterations with, we settled on the landing page layout, the navigation menu contents, and designs for the blog post and content pages.</p>
<h2 id="building-out-the-new-site---the-good-the-bad-the-ugly" style="position:relative;"><a href="#building-out-the-new-site---the-good-the-bad-the-ugly" aria-label="building out the new site   the good the bad the ugly permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Building out the new site - The Good, the Bad, the Ugly</h2>
<p>This section dives into the pros and cons of the Gatsby developer experience and its plugin ecosystem.</p>
<h3 id="good-shared-page-templates-and-layout-components" style="position:relative;"><a href="#good-shared-page-templates-and-layout-components" aria-label="good shared page templates and layout components permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>(Good) Shared page templates and layout components</h3>
<p>One of Gatsby’s core features is allowing developers to programmatically create HTML pages from templates (<a href="https://www.gatsbyjs.com/docs/recipes/pages-layouts/#creating-pages-programmatically-with-createpage">docs</a>). The templates themselves can use a GraphQL query in order to fetch the data needed to properly render the page.</p>
<p>I leveraged the page templates to programmatically create pages for each blog post (<a href="https://www.leadtoreadkc.org/give-success-direct-your-united-way-donation-to-lead-to-read-kc-2">example</a>) and the blog post list pages (<a href="https://www.leadtoreadkc.org/blog/">example</a>).</p>
<p>The templates also share a <a href="https://www.gatsbyjs.com/docs/recipes/pages-layouts/#creating-a-layout-component">layout component</a>, a React component that renders common page elements (header, site nav, footer, etc.) and then children components as the page content.</p>
<p>An abbreviated example of blogpost.js:</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> <span class="token function-variable function">BlogPost</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> data <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> wpPost <span class="token punctuation">}</span> <span class="token operator">=</span> data
  <span class="token keyword">const</span> <span class="token punctuation">{</span> title<span class="token punctuation">,</span> content<span class="token punctuation">,</span> date<span class="token punctuation">,</span> author <span class="token punctuation">}</span> <span class="token operator">=</span> wpPost
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>PageLayout<span class="token operator">></span>
      <span class="token operator">&lt;</span>Title value<span class="token operator">=</span><span class="token punctuation">{</span>title<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&lt;</span>Author name<span class="token operator">=</span><span class="token punctuation">{</span>author<span class="token punctuation">.</span>node<span class="token punctuation">.</span>name<span class="token punctuation">}</span> date<span class="token operator">=</span><span class="token punctuation">{</span>date<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&lt;</span>div dangerouslySetInnerHTML<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> __html<span class="token operator">:</span> content <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>PageLayout<span class="token operator">></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> BlogPost

<span class="token keyword">export</span> <span class="token keyword">const</span> postQuery <span class="token operator">=</span> graphql<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
  query($id: String!) {
    wpPost(id: { eq: $id }) {
      title
      content
      date
      author {
        node {
          name
        }
      }
    }
  }
</span><span class="token template-punctuation string">`</span></span></code></pre></div>
<h3 id="good-and-bad-a-new-gatsby-wordpress-plugin" style="position:relative;"><a href="#good-and-bad-a-new-gatsby-wordpress-plugin" aria-label="good and bad a new gatsby wordpress plugin permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>(Good and bad) A new Gatsby Wordpress plugin</h3>
<p>The Lead to Read team wanted to continue using Wordpress as the underlying <a href="https://en.wikipedia.org/wiki/Content_management_system">content management system</a> (CMS) for the site. Their team is comfortable with the WP interface for creating new pages and posts, and hosted WP instances are wildly inexpensive, with many hosting providers offering managed WP instances for $100-$200/year.</p>
<p>Sourcing data from any CMS is one of Gatsby’s core selling points, and they offer many plugins allowing developers to do just that. This includes <a href="https://github.com/gatsbyjs/gatsby-source-wordpress-experimental">gatsby-source-wordpress-experimental</a>: the new (and recommended) way to use a Wordpress database as a Gatsby data source. As the name implies, it’s still under active development, but it offers a superior development experience compared to the current <a href="https://www.gatsbyjs.com/plugins/gatsby-source-wordpress/">gatsby-source-wordpress</a>. The new plugin includes:</p>
<ul>
<li>Hot reloads when data in the Wordpress database updates</li>
<li>Posts that contain inline images are automatically converted into performant <a href="https://www.gatsbyjs.com/plugins/gatsby-image/"><code class="language-text">gatsby-image</code></a>s</li>
<li>A rich set of <a href="https://github.com/gatsbyjs/gatsby-source-wordpress-experimental/blob/master/docs/plugin-options.md#plugin-options">plugin options</a> to control exactly what data to pull from WP</li>
<li>And <a href="https://github.com/gatsbyjs/gatsby-source-wordpress-experimental/blob/master/docs/features/index.md#features">lots of other stuff</a></li>
</ul>
<p>Given the plugin’s official endorsement from Gatsby, I decided to hop on the early adopter train and use it for this project. The plugin was great <em>once I finally got it set up</em> - hot reloads made checking the formatting of blog posts a breeze. But the plugin setup took some time, and I hit multiple bugs with the upstream <a href="https://www.wpgraphql.com/">WPGraphQL</a> plugin (used heavily by <code class="language-text">gatsby-source-wordpress-experimental</code>) along the way:</p>
<ul>
<li><a href="https://github.com/gatsbyjs/gatsby-source-wordpress-experimental/issues/37">GraphQL type mismatch</a></li>
<li><a href="https://github.com/gatsbyjs/gatsby-source-wordpress-experimental/issues/139">Authentication issues</a></li>
</ul>
<p>And one open bug (with a workaround, actively being addressed by the plugin maintainers):</p>
<ul>
<li><a href="https://github.com/gatsbyjs/gatsby-source-wordpress-experimental/issues/327">Wordpress URL accidentally stripped of subdomain</a></li>
</ul>
<p>More generally:</p>
<ul>
<li>The plugin documentation is still very much a <a href="https://github.com/gatsbyjs/gatsby-source-wordpress-experimental/blob/master/docs/tutorials/index.md">WIP</a></li>
<li>Using the Gatsby plugin requires installing two additional plugins into the Wordpress instance (so many plugins!) - and keeping those plugins up-to-date. For developers who don’t have admin access to the Wordpress instance they’re sourcing data from, this could be a headache.</li>
<li>The experimental plugin was intentionally published as a separate package from the stable <code class="language-text">gatsby-source-wordpress</code> to allow for an incremental migration… but migrations are still a pain. Read: lots of GraphQL query rewrites.</li>
</ul>
<h3 id="good-rich-plugin-ecosystem" style="position:relative;"><a href="#good-rich-plugin-ecosystem" aria-label="good rich plugin ecosystem permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>(Good) Rich plugin ecosystem</h3>
<p>Gatsby touts a rich set of both “core” and “community” <a href="https://www.gatsbyjs.com/plugins">plugins</a>, with the total number of plugins at almost 2500.</p>
<p>I utilized <a href="https://www.gatsbyjs.com/plugins/gatsby-plugin-mailchimp/"><code class="language-text">gatsby-plugin-mailchimp</code></a> to integrate the site’s Newsletter Signup form with Lead to Read’s existing Mailchimp mailing list.</p>
<p>I also used <code class="language-text">gatsby-plugin-typography</code>, which I’ve <a href="https://etnichols.com/programming/blog-redesign-with-gatsby/#typography-module-gatsby-plugin-typography">written about before</a>, forking a version of the <a href="https://github.com/KyleAMathews/typography.js/tree/master/packages/typography-theme-st-annes">St. Anne’s</a> theme.</p>
<p>And last, the handy <a href="https://www.gatsbyjs.com/plugins/gatsby-plugin-typescript/"><code class="language-text">gatsby-plugin-typescript</code></a> provides handy drop-in support for <code class="language-text">.ts</code> and <code class="language-text">.tsx</code> files.</p>
<h3 id="goodbad-firebase-deploy-integration" style="position:relative;"><a href="#goodbad-firebase-deploy-integration" aria-label="goodbad firebase deploy integration permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>(Good/Bad) Firebase deploy integration</h3>
<p>With last year’s announcement of <a href="https://www.gatsbyjs.com/blog/2019-11-14-announcing-gatsby-cloud/">Gatsby Cloud</a>, it expanded into the world of cloud building and hosting, offering the same functionality as the more established Netlify.</p>
<p>Gatsby Cloud offers a variety of hosting integrations: S3, Firebase, Azure, etc. I used the Firebase integration; their <a href="https://www.gatsbyjs.com/docs/deploying-to-firebase/">documentation</a> made it a breeze to get things set up.</p>
<p>And even better, when used with the new wordpress plugin described above, the site will automatically rebuild when content changes in Wordpress, and then automatically push the new build to Firebase. Yay for a seamless edit-build-deploy pipeline!</p>
<p>Note that developers can still manually build Gatsby sites from the CLI (<code class="language-text">gatsby build</code>) and then use Firebase CLI (<code class="language-text">firebase deploy</code>) to push it.</p>
<p>But… that firebase hosting integration <a href="https://streamable.com/xiuh1o">was broken</a> the week we performed the cutover to the new site, blocking our ability to get automatic site deployments after WP content changed (I had to manually build/push as described above). To the Gatsby support team’s credit, they replied to my support ticket quickly and had the issue resolved &#x3C;12 hours after my initial report.</p>
<h3 id="ugly-hardcoding-home-page-data" style="position:relative;"><a href="#ugly-hardcoding-home-page-data" aria-label="ugly hardcoding home page data permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>(Ugly) Hardcoding home page data</h3>
<p>The contents of the site can be split into two buckets of React components:</p>
<ul>
<li>Dynamically generated components, data sourced from Wordpress (e.g. blog posts, site pages, “What’s New” section). i.e., what Gatsby was meant to do.</li>
<li>Hardcoded components (e.g., image carousel, “Our Reach” infographic) - page content is hardcoded into the components, does not leverage WP data sourcing. i.e., plain React components.</li>
</ul>
<p>The choice to hardcode data into some components is best explained with an example. Let’s look at the “How it Works” section of the website (<a href="https://imgur.com/a/indvb0u">screenshot</a>): a simple three-step graphic with some custom icons. Here’s the code:</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span>

<span class="token keyword">import</span> Icon <span class="token keyword">from</span> <span class="token string">'./icon'</span>

<span class="token keyword">import</span> <span class="token string">'./howitworks.scss'</span>

<span class="token comment">// Icon name, CSS class, description tuples</span>
<span class="token keyword">const</span> <span class="token constant">PAGE_DATA</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">[</span>
    <span class="token string">'school'</span><span class="token punctuation">,</span>
    <span class="token string">'purple-background'</span><span class="token punctuation">,</span>
    <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Identify schools and students in need of reading support and mentoring.</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span>
    <span class="token string">'recruit'</span><span class="token punctuation">,</span>
    <span class="token string">'orange-background'</span><span class="token punctuation">,</span>
    <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Recruit, train and pair Reading Mentors with students in grades K-3.</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span>
    <span class="token string">'book'</span><span class="token punctuation">,</span>
    <span class="token string">'bright-blue-background'</span><span class="token punctuation">,</span>
    <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Provide students with 30 minutes of one-to-one reading support and mentoring one lunch hour each week.</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>

<span class="token keyword">const</span> <span class="token function-variable function">HowItWorks</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span>
  <span class="token operator">&lt;</span>section<span class="token operator">></span>
    <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"content"</span><span class="token operator">></span>
      <span class="token operator">&lt;</span>h1 className<span class="token operator">=</span><span class="token string">"headline"</span><span class="token operator">></span>How It Works<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span>
      <span class="token operator">&lt;</span>ol className<span class="token operator">=</span><span class="token string">"how-it-works-list"</span><span class="token operator">></span>
        <span class="token punctuation">{</span><span class="token constant">PAGE_DATA</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">[</span>iconName<span class="token punctuation">,</span> className<span class="token punctuation">,</span> description<span class="token punctuation">]</span><span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span>
          <span class="token operator">&lt;</span>li key<span class="token operator">=</span><span class="token punctuation">{</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">hiw-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>i<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">}</span><span class="token operator">></span>
            <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token punctuation">{</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">circular-icon margin-medium </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>className<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">}</span><span class="token operator">></span>
              <span class="token operator">&lt;</span>Icon name<span class="token operator">=</span><span class="token punctuation">{</span>iconName<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
            <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"margin-top-small"</span><span class="token operator">></span>
              <span class="token operator">&lt;</span>span className<span class="token operator">=</span><span class="token string">"bold"</span><span class="token operator">></span><span class="token punctuation">{</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">.</span> <span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span>
              <span class="token punctuation">{</span>description<span class="token punctuation">}</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>
        <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>ol<span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>section<span class="token operator">></span>
<span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> HowItWorks</code></pre></div>
<p>It’s three sentence of actual content, which is unlikely to change often. It seems overkill to store each sentence in its own WP page, fetch them, sanitize the HTML and then use it in this graphic. What if the HTML from Wordpress is malformed, accidentally multi-paragraph? What if someone accidentally deletes or renames one of those pages? It’s always a tradeoff; given this is three sentences of “stable” content, I chose to hardcode.</p>
<p>Other Cloud CMS providers may provide more flexibility for storing simple key-value pairs (a brief skim of <a href="https://www.contentful.com/developers/docs/concepts/data-model/#array-fields">Contentful’s docs</a> indicates that <a href="https://www.contentful.com/developers/docs/concepts/data-model/#array-fields">Array fields</a> might very well solve this problem), but Wordpress doesn’t appear to offer a simple solution for this.</p>
<p>That same logic applies to the image carousel and the “Our Reach” infographic: hardcoded data to accommodate non-standard layouts. That means I, or future site maintainers, are on the hook for manually updating the content and rebuilding the site when things change in the future. But given the low frequency of changes, it seems like a fair tradeoff.</p>
<h3 id="good-site-performance" style="position:relative;"><a href="#good-site-performance" aria-label="good site performance permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>(Good) Site performance</h3>
<p>The new site performance is a big step in the right direction.</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;"
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/3394ad4db7be60090a219434debd12bf/77672/ltr_lighthouse_new.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 37.83783783783784%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAABt0lEQVQoz02SXY7TQBCEcwvy45mxHXvs+Dd2HCe7BMgmwgghIMsiAqt94QkJTsANOBK3+2h7tREPrVZ3zdRUV8/IGI91rkmsQWkPLfWm0EShi1EGU1r0NsHzBBPcl7wV3PcFNy7WWmwU4brucGZUpx7nG4fTbkYaGbqN5nxQfLia4qQWdduivl4xPS4pA0W3NdwfHfYrB+0G3N195tPpRBgGGCEdVQvFt5sJ768npFbzcHwmMeZdO0Zlltntmul5w+RY0cYO39+MuT9MOK4Vk5nDj1+/+fnnL34wxzWGUZ5ndM9j2irGeCG79YKPh4SqTFCOZt6k2P0KIyMqseBVG/J2Z/FcQxAEVKuWtvtCEIbD2KOmaSiWK4qyIo4jllVD1Wypqlo8cdmuWw4v91i5oLVmkRakeS3kiqIo6LrX7F9ck2eZeCoKe0Drx+gbM6lnzkwuOLjeXAhyeawgimM8UagFV4I/LaEnLYpyUDso7JuX8H1WYm6VpQNRFmmWqU+el4Q2xCwj8iKnrmtZwuOIveo+Llu+kEnDldwIYZkssHFCERvqfE4mhP33MOJzkiaDqidF/wvq63/tEe+vxsbnQwAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="Old Lead to Read website Lighthouse Scores"
        title="Old Lead to Read website Lighthouse Scores"
        src="/static/3394ad4db7be60090a219434debd12bf/fcda8/ltr_lighthouse_new.png"
        srcset="/static/3394ad4db7be60090a219434debd12bf/12f09/ltr_lighthouse_new.png 148w,
/static/3394ad4db7be60090a219434debd12bf/e4a3f/ltr_lighthouse_new.png 295w,
/static/3394ad4db7be60090a219434debd12bf/fcda8/ltr_lighthouse_new.png 590w,
/static/3394ad4db7be60090a219434debd12bf/efc66/ltr_lighthouse_new.png 885w,
/static/3394ad4db7be60090a219434debd12bf/77672/ltr_lighthouse_new.png 1060w"
        sizes="(max-width: 590px) 100vw, 590px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
  </a>
    </span></p>
<ul>
<li>The time to interactive for the home page dropped by almost 50% (~17 secs -> ~8 secs)</li>
<li>Accessibility score nearly doubled (47 -> 83)</li>
<li>Best practices score is now perfect (~35% increase)</li>
<li>SEO parity (82 -> 81)</li>
<li>Qualifies as a <a href="https://web.dev/what-are-pwas/">Progressive Web App</a></li>
</ul>
<p>But, there are quite a few optimizations remaining – reducing image sizes, improving image caching, deferring unused JS bundles, among other things.</p>
<h2 id="discussion" style="position:relative;"><a href="#discussion" aria-label="discussion permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Discussion</h2>
<p>The new site officially launched this past August at <a href="https://leadtoreadkc.org">https://leadtoreadkc.org</a>. Despite hiccups with plugin and hosting along the way, I really enjoyed using Gatsby for the project. Gatsby has expanded from an open source framework to an actual <a href="https://www.gatsbyjs.com/blog/2018-05-24-launching-new-gatsby-company/">company</a>, and it feels more mature in terms of its core documentation, core library stability, and customer support.</p>
<p>But the framework has drawbacks, too. I enjoyed Jared Palmer’s <a href="https://jaredpalmer.com/gatsby-vs-nextjs">Gatsby vs NextJS</a> post, in which he points out some of Gatsby’s shortcomings: the learning curve of GraphQL, the “snowflake” nature of Gatsby sites, the sometimes challenging debugging experience. It’s fair to say that Gatsby might be too heavyweight for someone just wanting to make a simple blog that only uses Markdown files as the data source.</p>
<p>And static sites have logical limitations. Would it make sense for NYTimes to use Gatsby to produce a static version of each one of its millions of articles? What about the comments on those articles? The static model doesn’t scale for sites with massive content bases or inherently dynamic data. And to Gatsby’s credit, they’re aware of the those limitations and encourage developers to use the static HTML where it makes sense and then leverage <a href="https://www.gatsbyjs.com/docs/react-hydration/">React hydration</a> to enable more “app-like” features.</p>
<p>Shifting briefly to the business side of things, I’m curious to see Gatsby’s long-term monetization strategy, and what they build out next. Their core revenue generator right now is via Gatsby Cloud - cloud build and hosting on different tiers. Will they double down on building out this part of the business? Will we see a “Gatsby CMS” – a competitor to Wordpress, Contentful and other cloud CMS providers? First, you integrate with them, then, you compete with them… we’ll see.</p>
<p>Have thoughts about Gatsby? Want to talk more about the website redesign? Shoot me a line at e3t5n6@gmail.com to chat. Thanks for reading!</p>
<p><em>A huge thanks to Martha Conradt, Pauly Hart, Jonathan Gaikwad and Hayley Rees for helping make this project a reality.</em></p></div></main><footer><div style="font-size:18px;color:hsla(291, 0%, 18%,0.95);text-align:center">© 2022 etnichols</div></footer></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script>
  
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-69960811-1', 'auto', {});
      
      
      
      
      
      }</script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/programming/lead-to-read-website";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-048ab40cb62a3ab0f5e6.js"],"component---node-modules-gatsby-plugin-offline-app-shell-js":["/component---node-modules-gatsby-plugin-offline-app-shell-js-ba2871b72521cc775c21.js"],"component---src-templates-post-template-js":["/component---src-templates-post-template-js-f851331e087c9b2b9fa5.js"],"component---src-templates-tags-template-js":["/component---src-templates-tags-template-js-630a49be366e01d949be.js"],"component---src-pages-404-js":["/component---src-pages-404-js-207fb1f65920149a74f0.js"],"component---src-pages-blog-js":["/component---src-pages-blog-js-4d72cc0729bbc273888a.js"],"component---src-pages-form-js":["/component---src-pages-form-js-c9419a00a5ae7c05629e.js"],"component---src-pages-index-tsx":["/component---src-pages-index-tsx-e04baead734005978f05.js"],"component---src-pages-programming-js":["/component---src-pages-programming-js-883a349f990cd945e2b8.js"],"component---src-pages-resume-tsx":["/component---src-pages-resume-tsx-7ebd74b729ad6da229d5.js"],"component---src-pages-tags-js":["/component---src-pages-tags-js-194490cb8de9939dc897.js"],"component---src-pages-tutorials-js":["/component---src-pages-tutorials-js-5e2af9d6919eb3974dfb.js"]};/*]]>*/</script><script src="/component---src-templates-post-template-js-f851331e087c9b2b9fa5.js" async=""></script><script src="/998111e0b4093109eb16f93865b5d86c605ebad2-6bce13f5c4178f43b987.js" async=""></script><script src="/styles-36681512479a843831b0.js" async=""></script><script src="/app-048ab40cb62a3ab0f5e6.js" async=""></script><script src="/framework-9438dbd474456b725327.js" async=""></script><script src="/webpack-runtime-84567eaa414c16347ec5.js" async=""></script></body></html>